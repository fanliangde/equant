equant V1.2.2 20210122

一、新功能：
	1. 增加历史回测阶段撮合成交设置，可在界面上设置，也可以通过调用SetHisMatch()函数设置
    2. 界面持仓监控增加每个策略持仓明细信息
    3. 回测报告交易详情界面增加筛选、排序功能
    4. 账户数据的委托、成交、持仓数据未准备就绪时策略不进行实盘运行
    
二、功能改进：
    1.  修改A_OrderIsClose函数
    2.  修复周五十二点K线不刷新问题
    3.  修改上期所、中金所、能交所取实时均价不正确问题
    4.  修改交易账户数据未接收完毕收到委托、成交、持仓数据推送提示账户未登录问题
    5.  修改BarStatus函数在实盘运行时返回值不正确问题
    6.  修改请求K线数据因数据越界导致K线数量订阅不足问题
    7.  策略编号只保存当前策略列表中的最大编号
    8.  修改策略列表右键选择属性设置出错（策略路径不存在导致）
    9.  修改持仓同步显示的策略持仓不正确（字典作为参数传给函数导致）
    10. 修改触发方式界面和代码同时设置没有全部生效问题
    11. 修改止损止盈对主连合约不生效问题（主连合约没有转换为对应合约）
    12. 修改因策略名称、指标名称超过规定长度引起程序异常
    13. 限制用户设置策略名长度
    14. 界面增加可选黄金交易所合约
    15.   信号日志和系统日志清除时增加一条清除分隔线
    16.   修改按所有K线订阅数据的从客户端取数据方式
    17.  优化按日期订阅K线时取数据慢问题
    18.  修改取不到深度行情卖价问题
    19.  给引擎到策略队列字典加锁防止访问出错（eg2stQueueDict）
    20.  修改定时触发运行一天后定时触发无效问题
    21.  修改tick图卖出开仓信号不显示问题
    22.  属性设置界面合约设置处把基准合约标记出来
    23.  修改Margin函数获取不到主连合约的持仓保证金
    24.  修改断线后引擎向9.5推送品种数据提示_egCallbackDict code(%d) not register!问题
    25.  修改属性设置中用户名重复问题
    26.  修改BarsSinceToday函数调用出错问题
    27.  修改设置多合约保证金和手续费时取值不正确问题
    28.  优化calc代码
    29.  修改回测报告阶段总结计算错误问题
    30.  回测报告中删除空仓周期数和最大连续空仓周期数
    31.  修改回测报告中最大回撤计算错误问题，增加最大回撤开始时间，删除空仓周期和最长空仓周期
    32.  修改策略修改后直接点运行策略未保存成功问题（保存成功通知界面）
    33.  修改”界面上勾选持仓同步，同时订阅主连合约“报错问题
    34.  修改开仓方向控制错误
    35.  增加交易所状态接收日志，最新价接收日志



equant V1.2.2 20200414

一、新功能：
	1. 极星9.5客户端支持深色背景，并且默认为黑色背景
	2. 保存量化主窗口位置
	3. 测报告窗增加最大化支持
	4. 用户参数g_params在initialize函数中生效
	5. 增加订单成交详情函数A_OrderFilledList()
	6. 增加量化主进程退出后子进程自动终止（防止python进程残留）
	7. 增加即时行情函数: 昨收盘价Q_PreClose、结算价Q_SettlePrice、现手(最新成交量)Q_LastVol、委买总量Q_BuyTotalVol、委卖总量Q_SellTotalVol
	8. 更新资金方式由量化主动查询改为由9.5推送资金信息的方式，解决有些账户函数获取资金存在滞后的问题
	9. 增加获取逐笔盈亏的函数: 逐笔浮盈A_PerProfitLoss、逐笔平盈A_PerCoverProfit
	10. 增加安装日志

二、功能改进：
	1. 修改TimeDiff函数返回值不正确问题
	2. 修改账户函数取外盘资金信息取不到值问题
	3. 修改A_TotalProfitLoss、A_BuyProfitLoss、A_SellProfitLoss输出结果错误问题
	4. 修改获取浮动盈亏A_ProfitLoss、平仓盈亏A_CoverProfit返回值不正确问题
	5. 修改回测报告成交额计算错误问题
	6. 修改界面滚动条属性设置方便拖动
	7. 修复策略恢复文件StrategyContext.json读取失败问题
	8. 修改实盘阶段发单当日有效字段不正确问题
	9. 函数GetSessionStartTime()、GetSessionEndTime()增加索引判断
	10. 修改登录账户断线重连后取不到资金问题
	11. 修改极星9.5客户端在程序化页面切换策略会出现程序崩溃问题
	12. 修改极星9.5客户端一直提示连接超时问题
	13. 修改极星9.5客户端期权策略看涨看跌bug



equant V1.2.0 20200115

一、新功能：
    1. 代码编辑器的代码自动完成功能, 支持Ctrl + Shift + 空格
    2. 代码编辑器的鼠标悬停提示，鼠标悬停到函数上时显示函数提示的功能
    3. 代码编辑器右键菜单功能
    4. 代码编辑器的查询与替换功能，通过 Ctrl + F 或 Ctrl + H 调用
    5. 修改策略名时代码编辑器上的标签同步修改
    6. 删除策略时代码编辑器上的标签同步关闭
    7. 切换标签时保存当前标签的上下文信息，恢复新标签的上下文信息
    8. 持仓同步下单前增加是否交易时段的判断
    9. 标题栏增加版本号

二、功能改进：
    1. 修复运行设置界面bug
    2. 修复用户参数设置修改后不能保存问题
    3. 修改窗口在不同显示器显示不全问题
    4. 修改回测报告阶段总结数据重复问题
    5. 修改手动更新文件
    6. 策略目录自动更新
    7. 界面风格默认为黑色主题



equant V1.1.0 20191129

一、安装注意事项：
    1. 因为本版本对python运行环境进行了调整，所以通过升级方法下载equant后程序将无法正常运行，需要通过安装包重新安装
    2. 重新安装时，会对以前安装的极星客户端文件夹和量化终端文件夹进行备份，可以在安装目录内找到备份文件
    3. 对程序进行卸载时会删除安装目录中的所有文件，包括备份文件，卸载程序前请注意对策略进行备份
    4. 建议等新版本稳定后再删除老版本
    5. 安装过该版本后，后续版本可通过update.bat进行升级
    6. 暂不支持在Windows Server 2008r2 上运行

二、新功能：
    1. 增加新版界面支持换肤，系统函数查找
    2. 编辑器支持多选项卡功能
    3. 策略目录支持导入以及定位策略文件功能
    4. 增加黄金交易所合约支持
    5. 增加持仓同步功能
    6. 增加历史回测结束回调
    7. 增加品种交易状态查询接口
    8. 增加策略最后一次Buy或者Sell建仓的Bar到当前Bar计数的接口
    9. 增加接口[A_OrderIsClose], 判断某个委托单是否已完结
    10. 增加获取当前策略ID接口，用户日志打印增加当前策略ID
    11. 增加获取所有订单号列表接口
    
三、功能改进：
    1. 修改自动更新脚本，增加检测极星客户端版本号
    2. 回测报告增加图表分析数据
    3. 修改A_AllOrderNo返回值, 类型保持一致
    4. 修改CurrentBar返回值无数据是返回-1
    5. A函数账户未登录错误日志打印，过滤空字符串账户

四、BUG修复：
    1. 修复获取用户UD,账号Key不存在异常
    2. 修复BarsSinceLastEntry错误
    3. 修复下单时根据买卖方向设置过滤订单
    4. 修复策略无法获取套利品种TradeDot问题
    5. 修改CountIf, Buy, Sell等函数说明错误

五、使用注意事项：
    1. 用户使用系统策略过程中尽量不要对系统策略进行修改，避免后期升级过程中
       修改的系统策略文件被误覆盖



equant V1.0.9    更新日期：20190927

一、新功能：
    1. 增加计算指定合约指定交易日指定交易时段的起始和结束时间戳接口
    2. 增加记录最近一笔买开仓单和卖开仓单订单信息
    3. 增加获取买仓和卖仓的最近一笔的开仓价和开仓以来的最高最低价接口
    4. A函数增加修改未成交订单接口
    5. 扩展函数库增加求最近周期均值的接口

二、功能改进：
    1. 修改为先handle_data再止损止盈，与9.2保持一致
    2. 修改历史阶段止损价计算逻辑，考虑止损点和超价点数
    3. 修改止损止盈根据价格类型获取平仓价
    4. 增加止损止盈支持市价单
    5. 修改止损止盈支持买卖两个方向同时持仓
    6. 删除更新交易所状态结束日志打印
    7. 启动时检查增加Equant版本更新
    8. 修改更新工程文件
    9. 修改ico图标
    10. 修改calProfit之前先获取映射合约
    11. 历史阶段浮动止损止盈价格考虑当前Bar的最高最低价
    12. 设置运行窗口大小可调节， 解决分辨率问题导致部分按钮无法显示
    13. 修改A函数账号未登录时报错，去掉抛出异常
    14. 修改浮动止损Start条件和Stop条件只在同一根bar触发
    15. 主图添加止损止盈触发文字
    16. A函数支持回测
    17. 修改界面保证金比例默认值为8%,，策略运行时未设置指定合约此值，默认为8%

三、BUG修复：
    1. 修正获取超价点数关键字错误
    2. 修改getHoldProfit函数中取持仓信息错误
    3. 修改设置保证金时类型传入错误
    4. 修改设置保证金比例设置和获取错误

   
   
equant V1.0.8    更新日期：20190904
一、新功能：
    1. 增加exit_callback接口，在策略停止或者量化退出时调用
    2. 增加获取所有登录账号接口
    3. 根据时间戳计算指定合约的交易日
    4. 增加获取期权即时行情理论价及希腊字母值接口

二、功能改进：
    1. 修改平仓逻辑, SHFE和INE的平仓支持选择平今平昨，默认自适应拆单，先平昨再平今
    2. 界面日志只有用户日志实时刷新，信号记录和系统日志采用载入模式，加刷新按钮
    3. 修改界面的可选品种
    4. 修改过期策略
    5. A函数增加账号参数，并兼容老用法 
    6. 优化策略交易数据查询逻辑
    7. SpdTrade1和SpdTrade2套利策略修改 
    8. 策略运行状态切换时更新界面信息
    9. 修改A函数取订单状态逻辑
    10. StarTrade和StopTrade之后，通知界面更新状态
    11. 优化账户登录登出交易数据查询等逻辑, 资金账户信息同步到界面

三、BUG修复：
    1. 修改获取最后订单号逻辑, 解决下单时间为空异常
    2. 修改下平今单时cost错误
    3. 修改界面选择合约时解析品种合约错误问题
    4. 修改最大回撤和浮动盈亏计算错误
    5. 修正实时阶段获取浮动盈亏交易日获取问题
    6. 修复点击运行弹窗抖动，修改错误
    7. 解决投资报告K线类型和周期显示不对问题
    8. 解决不填手数，获取默认手数错误问题
    9. 处理时间戳无效问题
    10. 更改保证金取值为0错误
    11. 修复getTotalPosition函数错误
    12. 解决策略未恢复问题
    13. 解决IsInSession判断失效问题
    14. 解决没有账户登录时，界面运行状态卡住问题
    15. 解决交易日切换失败问题
    16. 修复用户没有登录时，A_AccountID函数KeyError异常
    17. 修改日志不显示错误
    18. 解决获取定单号失败问题
    19. 修改解析策略param参数错误
    20. 修复Pivot数组访问越界Bug
    21. 解决获取买持仓错误问题
    22. 解决SubQuote订阅失败问题
    23. 解决获取所有已排队委托报错问题
    24. 解决运行失败问题
    25. 优化底层数据传输逻辑，防止数据大时卡死问题
    26. 修复 A_TotalProfitLoss函数bug
    27. 修复交易所套利无最新价
    28. 解决历史回测阶段交易日跨周末日线和分钟线排序错误问题
    29. 解决显示合约周期不在触发合约周期列表，显示合约周期的K线数据无法触发handle_data问题



equant V1.0.7 20190724
    1.  修复平仓时日志信息报错
    2.  修复自动滚屏报错
    3.  修复UI用户账户重复显示bug
    4.  修改周期为120M或240M可用资金、最大回撤不更新bug
    5.  添加功能-日志分用户日志、系统日志、信号日志
    6.  历史日志转存到log目录下的his目录下
    7.  解析策略中的用户参数并在运行界面显示
    8.  极星9.5退出给出提示
    9.  平仓不判断手续费
    10. 运行界面增加发单报警选项
    11. 修复获取撤单（该订单是由已删除策略下的）状态异常问题。
    12. 修复BuyPosition和SellPosition，去除MarketPostion为0返回0的限制。
    13. 修复Q_AvgPrice返回值错误问题。
    14. 修复IsInSession获取当前时间不对的问题。
    15. 调用SetBarInterval清空界面设置的参数。
    16. 实盘下单价格增加滑点损耗。
    17. 修复调用SetInitCapital报错的问题。
    18. 增加配置警报状态setAlarm/getAlarm方法。
    19. Buy/BuyToCover/Sell/SellShort下单合约未订阅时报错。
    20. 增加SetUserNo用以更改账户。
    21. 完善参数设置功能
    22. 新增序列变量支持
    23. 完善止损、止盈、浮动止损止盈功能，历史回测支持止损、止盈
    24. 右键子目录创建
    25. 增加交易所状态和交易所时间支持
    26. 主力合约回测和主力合约下单支持
    27. 修复tick不刷新bug
    28. 修复k线稳定发单bug
    29. 修复交易所状态更新bug
    30. 修复0点K线跳空bug
    31. 修复K线倒计时bug
    32. 删除FuncTemplate目录，修改为扩展函数，部分统计函数支持增量计算


工作计划：
    1. 策略加密
    2. 性能优化
    3. 策略界面优化，9.5和量化分离
    4. linux版本（无界面版本支持）
    5. 行情直连
    6. 支持C语言对接
    7. 量化社区(教程， 论坛)



equant V1.0.6 20190710

    1.  修改发单限制bug
    2.  修改策略刷新bug(新建策略和在界面上点击会弹出提示已修改）
    3.  策略监控界面右键增加全选功能
    4.  双击选中策略后策略可见位置放在开始处
    5.  修改日志打印格式
    6.  量化终端启动一次对应一份日志文件
    7.  订单手数为0判断，增加下单失败信息
    8.  K线类型增加分笔
    9.  订单计算加入滑点损耗
    10. 交易方向控制
    11. 修改重命名策略报错问题
    12. 修改删除策略弹出本地文件已修改提示bug
    13. 修改本地文件删除策略树刷新错误bug
    14. 界面策略树自动刷新
    15. 策略移动(鼠标拖动，不支持批量操作)
    16. 修复策略删除后，9.5可以切换bug
    17. 用户自定义编写py文件
    18. Buy/BuyToCover/Sell/SellShort/A_SendOrder方法增加主连/近月的映射
    19. 函数模板增加BarsLast方法
    20. 增加订阅SubQuote和退订UnsubQuote即时行情合约的方法
    21. 增加查询主力/近月映射合约方法GetIndexMap
    22. 引擎订阅合约时映射商品z种类为对应月份的具体合约
    23. SetTriggerType增加K线触发类型
    24. 增加A_LastOrderNo方法
    25. 策略交易函数增加计算滑点损耗后的定单价格
    26. 屏蔽不支持的K线周期类型，仅保留支持的分笔/秒/分钟/天类型
    27. 修复HisData取Enum_Data_Time()数据类型异常的问题
    28. Buy/Sellshort增加自动反手控制标识
    29. 修复策略ExchangeName取不到值的问题
    30. 修改A_BuyProfitLoss和A_SellProfitLoss的返回值为逐笔浮盈
    31. 修复Q_LastDate和Q_LastTime的返回格式为数字
    32. 修复A_BuyAvgPrice/A_SellAvgPrice/A_TotalAvgPrice/A_TotalPosition函数实现
    33. IsInSession兼容跨期套利合约
    34. 增加交易所状态和交易所系统时间函数。
    35. 日志界面自动滚屏菜单，
    36. 策略异常时不在监控界面更新

